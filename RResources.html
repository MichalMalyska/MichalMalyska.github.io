<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Michal Malyska" />


<title>R Resources</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Michal Malyska</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-university"></span>
     
    Teaching
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="STA130W20.html">
        <span class="fa fa-book"></span>
         
        STA130 - Intro to Data Science Spring 2020
      </a>
    </li>
    <li>
      <a href="STA130F19.html">
        <span class="fa fa-book"></span>
         
        STA130 - Intro to Data Science Fall 2019
      </a>
    </li>
    <li>
      <a href="STA314F19.html">
        <span class="fa fa-book"></span>
         
        STA314 - Machine Learning I Fall 2019
      </a>
    </li>
    <li>
      <a href="STA220.html">
        <span class="fa fa-book"></span>
         
        STA220 - The Practice of Statistics I Summer 2019
      </a>
    </li>
    <li>
      <a href="STA314.html">
        <span class="fa fa-book"></span>
         
        STA314 - Machine Learning I Fall 2018
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book"></span>
     
    Course Work
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Coursework_Summary.html">
        <span class="fa fa-book"></span>
         
        Coursework Summary
      </a>
    </li>
    <li>
      <a href="STA410_A1.html">
        <span class="fa fa-code"></span>
         
        STA410 - Computational Statistics - Assignment 1
      </a>
    </li>
    <li>
      <a href="STA410_A2.html">
        <span class="fa fa-code"></span>
         
        STA410 - Computational Statistics - Assignment 2
      </a>
    </li>
    <li>
      <a href="STA410_A3.html">
        <span class="fa fa-code"></span>
         
        STA410 - Computational Statistics - Assignment 3
      </a>
    </li>
    <li>
      <a href="STA410_A4.html">
        <span class="fa fa-code"></span>
         
        STA410 - Computational Statistics - Assignment 4
      </a>
    </li>
    <li>
      <a href="STA447_A2.html">
        <span class="fa fa-code"></span>
         
        STA447 - Stochastic Processes - Assignment 2
      </a>
    </li>
    <li>
      <a href="STA_490_ReactionTimes_Project.html">
        <span class="fa fa-code"></span>
         
        STA490 - Stats Consulting and Collaboration
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-pencil"></span>
     
    Personal Projects
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ASNA2019CC_datacreation.html">
        <span class="fa fa-code"></span>
         
        ASNA2019 Case Competition
      </a>
    </li>
    <li>
      <a href="Kaggle.html">
        <span class="fa fa-code"></span>
         
        Kaggle Competitions
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-code"></span>
     
    Resources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="RResources.html">
        <span class="fa fa-book"></span>
         
        RStudio / R resources
      </a>
    </li>
    <li>
      <a href="StatsResources.html">
        <span class="fa fa-book"></span>
         
        General Statistics resources
      </a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">
    <span class="fa fa-info"></span>
     
    About me
  </a>
</li>
<li>
  <a href="resume.pdf">
    <span class="fa fa-file-pdf-o"></span>
     
    Resume
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">R Resources</h1>
<h4 class="author">Michal Malyska</h4>

</div>


<p>To avoid copypasting the R setup and guides into every course material file I will be hosting all of the R resources here and link from courses to specific chapters.</p>
<div id="r-setup" class="section level1">
<h1>R Setup</h1>
<div id="downloading-r-and-rstudio." class="section level2">
<h2>Downloading R and Rstudio.</h2>
<ol style="list-style-type: decimal">
<li><p>Go to the UofT CRAN <a href="http://cran.utstat.utoronto.ca/">website</a> and download and install R for your Operating System.</p></li>
<li><p>Go to the Rstudio <a href="https://www.rstudio.com/products/rstudio/download/#download">website</a> and download and install it.</p></li>
</ol>
</div>
<div id="downloading-important-packages" class="section level2">
<h2>Downloading important packages</h2>
<p>Open Rstudio, and navigate to the console. Then run the following commands to get the packages I highly recommend you get:</p>
<p>install.packages(c(‘gridExtra’,‘tidyverse’,‘plotly’, ‘GGally’))</p>
<p>You might need to replace the quotation marks if you copypaste this.</p>
<p>This will install all the packages we should need for the class and beyond. Whenever you want to add a package you can either call the command:</p>
<p>install.packages(&lt;quoted package name&gt;)</p>
<p>or navigate to the Files and plots pane in Rstudio, click on packages, then install, and type in the name.</p>
<p><strong>Note that you only need to do this once, and the packages will remain for any R script you are writing.</strong></p>
</div>
<div id="learning" class="section level2">
<h2>Learning</h2>
<p>There is a number of resources available for you to learn and master the tidyverse package, which is what you will be using if you ever work with R. It’s technically not required for the course but it will make your life a lot easier.</p>
<p><a href="http://r4ds.had.co.nz/">Learn R with tidyverse</a> - this on it’s own should give you good enough background to handle most of the coding you will ever do in R, both in class, and in a professional setting.</p>
<p><a href="https://adv-r.hadley.nz/">Advanced R with tidyverse</a> - far beyond the scope of what’s needed for the course, but a great resource if you want to get involved with R.</p>
<p><a href="https://www.rstudio.com/resources/cheatsheets/">Cheatsheets</a> - very useful set of cheatsheets that you should probably keep open whenever you are working with tidyverse. (Especially the visiualization one)</p>
<p><a href="https://evamaerey.github.io/ggplot_flipbook/ggplot_flipbook_xaringan.html">GGPlot Flipbook</a> - The best resource to get familiar with the slightly unintuitive syntax of ggplot.</p>
<p>Some other packages you should consider looking into, that will come handy during this class:</p>
<p>“car” - it is “the package” for regression models.</p>
<p>“summarytools” - contains function “dfSummary” which is the fastest way to get meaningful first glance at the data. It’s a good compromise between the ease of using “summary” or “glance”, and providing as much information as possible.</p>
<p>“forcats” - package for working with factors in r, part of the tidyverse family but not included in the tidyverse itself.</p>
<p>Just to cover all bases below I will show you the simple workflow that I follow when working with a new dataset, like you will be doing during this class.</p>
</div>
<div id="rstudio-setup-and-settings" class="section level2">
<h2>RStudio Setup and settings</h2>
<p>If this is your first time using RStudio, you should adjust your settings:</p>
<ul>
<li><p>Navigate to Tools -&gt; Global Options</p></li>
<li><p>Change “Save workspace to .RData on exit” to Never</p></li>
<li><p>Uncheck “Restore .RData into workspace at startup”</p></li>
</ul>
<p>This is what mine look like:</p>
<p><img src="figures/RStudio%20Setup.png" /></p>
<p>Now, every time you want to start working on something, you should begin by creating an <strong>Rproject</strong>. This helps you keep track of the files, sets your working directory so that data loading is easier, and you should do it almost <strong>always</strong>.</p>
<p>Now that we have all that out of the way let’s start with what to do once you have RStudio open and ready to work.</p>
</div>
<div id="file-setup" class="section level2">
<h2>File Setup</h2>
<p>Since you will need to create pdfs from your code with figures and equations you will be using the knitr package and will be working in .Rmd files. This is the most common way to write anything in R that isn’t pure code. Make sure you have some distribution of LaTeX downloaded as it is necessary to create the pdfs. I recommend MikTeX, but it shouldn’t matter which one you have for this course.</p>
<p>When you create a new .Rmd file you will notice that at the top it will have a header containing the file title, your name and date. If you want to add a table of contents (which is created from headers) just change the output line to look like this:</p>
<p><img src="figures/Table%20of%20contents%20output.png" /></p>
<p>To actually work with pdf creation you will need to download a LaTeX distribution. Navigate to this <a href="https://www.latex-project.org/get/#tex-distributions">link</a>, and download the appropriate one (MacTeX for Macs and MikTeX for Windows).</p>
<p>After you are done restart your R.</p>
</div>
<div id="how-to-work-in-r-without-pain" class="section level2">
<h2>How to work in R without pain</h2>
<div id="projects" class="section level3">
<h3>Projects</h3>
<p>Each time you work on a new “thing” whether it be a course, or research, I recommend you set up a project. The way to do it is:</p>
<ol style="list-style-type: decimal">
<li><p>Open RStudio</p></li>
<li><p>Look in the top right corner, you will see a project icon.</p></li>
</ol>
<p><img src="figures/RStudioProject.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Click it and select New Project, then select New Directory</li>
</ol>
<p><img src="figures/RStudioProject2.png" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Create your new folder (It creates a regular folder with a special file inside)</li>
</ol>
<p><img src="figures/RStudioProject3.png" /></p>
<p>Now whenever you work in RStudio just open up the project and work there. It will automatically set your working directory to that folder, and open up all the files you had open previously. You can tell that the project is open by looking in the top right corner again. This website is written in an RProject I called “Files” so when I look in my top right corner I see this:</p>
<p><img src="figures/RStudioProject4.png" /></p>
<p>Once you are in a project you should work in RMarkdown files, and knit them to pdf. That way you get very crisp, clean project reports.</p>
</div>
</div>
<div id="packages" class="section level2">
<h2>Packages</h2>
<p>At the start of each file you should also load ALL the packages you will be using. Please don’t scatter library calls throughout your file.</p>
<pre class="r"><code>knitr::opts_chunk$set(cache = TRUE)
library(gridExtra)
#library(summarytools) ### There is a problem with summarytools on the current R version
library(tidyverse)
library(forcats)
library(GGally)


set.seed(1337) # This line makes the random generation for this file be the same
# Every time it is run</code></pre>
</div>
</div>
<div id="loading-data" class="section level1">
<h1>Loading data</h1>
<p>First let’s see how we would load data from a downloaded “.csv” file:</p>
<p>The example dataset will be the one create for the Actuarial Students National Association case competition technical challenge from this year. If you are interested in how the data was created you can check out the personal projects tab and find it under “ASNA Case Comp”.</p>
<pre class="r"><code># Load in the example.csv file that is in the working directory (this is assuming either the project
# was created or manual change of working directory happened before this line)

# Using Base reading (not advised)
data1 &lt;- read.csv(&quot;training_data.csv&quot;)

# Using Tidyverse loading
data2 &lt;- read_csv(&quot;training_data.csv&quot;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   id = col_double(),
##   Education = col_character(),
##   EmploymentStatus = col_character(),
##   Income = col_double(),
##   `Marital Status` = col_character(),
##   `State Code` = col_character(),
##   Coverage = col_character(),
##   Gender = col_character(),
##   `Location Code` = col_character(),
##   `Monthly Premium Auto` = col_double(),
##   `Months Since Last Claim` = col_double(),
##   `Months Since Policy Inception` = col_double(),
##   `Number of Open Complaints` = col_double(),
##   `Number of Policies` = col_double(),
##   `Claim Reason` = col_character(),
##   `Sales Channel` = col_character(),
##   `Vehicle Class` = col_character(),
##   `Vehicle Size` = col_character(),
##   `Claim Class` = col_double()
## )</code></pre>
<pre class="r"><code># Load data specifying all possible options:
data3 &lt;- read_csv(file = &quot;training_data.csv&quot;, # file path relative to WD
                  col_names = TRUE, # Does the file include column names
                  na = c(&quot;&quot;, &quot;NA&quot;, &quot;N/A&quot;), # What are the missing values in the file 
                  #(specified in a vector)
                  quoted_na = TRUE, # should missing values inside of quotes be missing
                  skip = 0, # How many lines to skip
                  n_max = Inf, # How many lines to read at most (Inf = infinity)
                  guess_max = 10000 # How many records to use to guess the type of column
                  # if not specified in col_types = c()
                  )</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   id = col_double(),
##   Education = col_character(),
##   EmploymentStatus = col_character(),
##   Income = col_double(),
##   `Marital Status` = col_character(),
##   `State Code` = col_character(),
##   Coverage = col_character(),
##   Gender = col_character(),
##   `Location Code` = col_character(),
##   `Monthly Premium Auto` = col_double(),
##   `Months Since Last Claim` = col_double(),
##   `Months Since Policy Inception` = col_double(),
##   `Number of Open Complaints` = col_double(),
##   `Number of Policies` = col_double(),
##   `Claim Reason` = col_character(),
##   `Sales Channel` = col_character(),
##   `Vehicle Class` = col_character(),
##   `Vehicle Size` = col_character(),
##   `Claim Class` = col_double()
## )</code></pre>
<pre class="r"><code># This is to remove two of the redundant data files from my wd
df &lt;- data3
rm(list = c(&quot;data1&quot;, &quot;data2&quot;, &quot;data3&quot;))</code></pre>
<p>In most cases you will want to specify at least some of the parameters from the cell above, especially helpful is guess_max, and na. However in this course we will be working mostly with nicely formatted data so it shouldn’t be an issue.</p>
<div id="analyzing-data" class="section level3">
<h3>Analyzing Data</h3>
<p>I will skip showing you base R way of analyzing data, I’ve never seen it used outside of classes, and is neither easier nor faster. If you are really interested and want to work in a field that has extremely harsh regulations regarding software (clinical trials maybe?), you can use the swirl package to learn how to do it.</p>
<pre class="r"><code>## There is a problem with summarytools on the current R version

# Take a first glance at the data:
#dfSummary(df)</code></pre>
<p>As you can see the summary provided by the dfSummary function is quite comprehensive. You see the type, what percentage of values is valid (non-missing), the simple summary (mean, median, sd, etc), a nice ASCII plot of the distribution(!!!) of data, and the number of observations in the most common values. If you were to use base R to get all of this, it would probably be around 5-6 lines of code per column of your data.</p>
<p>Now I will show you how to create a summary datasets using tidyverse and wrangle the data in general. There are a few very important functions you should learn:</p>
<ul>
<li><p><em>mutate</em> - create a column as a transformation of existing columns</p></li>
<li><p><em>select</em> - select a subset of columns</p></li>
<li><p><em>filter</em> - filter only rows fuliling the criteria</p></li>
<li><p><em>rename</em> - rename a column</p></li>
<li><p><em>group_by</em> - allows you to group your data based on a data column</p></li>
<li><p><em>summarize</em> - self explanatory</p></li>
</ul>
<p>One more very important part of the tidyverse is the pipe operator %&gt;% which feeds the results of one function as the first argument to the next function. It makes the code a lot more readable and allows you to write it in a better way since you don’t go in to out but rather in order.</p>
<p>Below I will show you some examples of how I would create some potentially interesting summaries of data:</p>
<pre class="r"><code>summary1 &lt;- df %&gt;% # This line specifies the new dataset name, and starting data + pipe into
    dplyr::select(`Vehicle Size`, `Claim Class`, `Monthly Premium Auto`, Coverage, `Marital Status`) %&gt;%
    # I select only the few columns of interest
    filter(`Monthly Premium Auto` &gt; 65) %&gt;% # I only want the people that have Auto premiums above
    # 65, this will usually come from the business or research question you are trying to answer
    group_by(`Vehicle Size`, Coverage, `Marital Status`) %&gt;% # I want to summarize
    #them by the categorical variables
    summarise(mean_prem = mean(`Monthly Premium Auto`), # I want to have mean auto premium
              count = n(), # Count of those vehicles
              avg_sev = mean(`Claim Class`) # I want to have the average Claim Class (severity)
              )
# Now I will take this created summary and analyze it further:

summary2 &lt;- summary1 %&gt;% 
    mutate(Total_Premium = mean_prem * count) %&gt;% # I create the total premium from the group
    # as Average Premium * count of policies in that group
    filter(Total_Premium &gt; 100000) # Filter out lines of business that are
    # under 100k in total premium

# This is the subset of data that might be of interest to me, let&#39;s look at it again:
## There is a problem with summarytools on the current R version
# dfSummary(summary2)</code></pre>
<p>Normally at this point I would be making some simple graphs and reporting back to the business what they wanted to know, or digging deeper for causes depending on the communicated need. If this was part of my own project I would try to investigate further why there are not that many large cars in our book and why are the “Premium” coverages not a big part of our business.</p>
<p>To get started with the visualisation part, I will prepare some simple graphs from the newly obtained summary data. The main plotting function we will be using is ggplot2 (as opposed to built in functions), the syntax is not very intuitive at first, and there are some kinks you will have to figure out, but ultimately the combination of dplyr (tidyverse) data wrangling and analysis with ggplot2 plotting makes for a very powerful and simple to use set of tools.</p>
<pre class="r"><code>plot &lt;- ggplot(data = summary2, # Create a plot object, from summary2
               mapping = aes(x = `Vehicle Size`, # x axis is Vehicle Size
                            y = `Total_Premium`, # y axis is Total Premium
                            fill = Coverage)) + # The inside of the figures is colored by coverage
    geom_col(show.legend = TRUE) + # Add a column plot (barplot is for frequencies in ggplot2)
    coord_flip() + # Flip the chart to be sideways
    theme_minimal() + # Set the minimal theme
    labs(title = &quot;Simple plotting illustration&quot;, # Add title
         x = &quot;Vehicle Size&quot;, # Rename X axis
         y = &quot;Total Premium($)&quot;) # Rename Y axis 

plot # Show the plot</code></pre>
<p><img src="RResources_files/figure-html/basic%20graphs%20in%20ggplot2-1.png" width="576" /></p>
</div>
</div>
<div id="packages-1" class="section level1">
<h1>Packages</h1>
<p>This part is pretty much me trying to keep track of cool R / Python packages that I see on twitter.</p>
<div id="list" class="section level2">
<h2>List:</h2>
<div id="general" class="section level3">
<h3>General</h3>
<ul>
<li><p>GGally - Plotting</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/broom/vignettes/broom.html">Broom</a> - Better output for models</p></li>
</ul>
</div>
<div id="tidyverse-related" class="section level3">
<h3>Tidyverse related:</h3>
<ul>
<li><p>Tidymodels - Suite of tools for modelling. Of particular note are parsnip and recipes.</p></li>
<li><p>Tribble</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html">Cowplot</a> (needs loading after tidyverse) - Simplifies GGPlot themes and arranging</p></li>
<li><p><a href="https://github.com/elbersb/tidylog">Tidylog</a> - Feedback on operation results for dplyr. Increases runtime but great for EDA.</p></li>
<li><p><a href="https://rviews.rstudio.com/2019/09/19/intro-to-ggforce/">GGforce</a> - Adds onto ggplot</p></li>
</ul>
</div>
<div id="qol" class="section level3">
<h3>QoL</h3>
<ul>
<li><p>Janitor</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/datapasta/vignettes/how-to-datapasta.html">Datapasta</a> - allows for pasting from things like jupyter to R without formatting</p></li>
</ul>
</div>
<div id="website-building" class="section level3">
<h3>Website Building</h3>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
